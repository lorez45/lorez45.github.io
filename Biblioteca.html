<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Portale Biblioteca</title>

<style>
    body {
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        background-color: #f4f6f8;
    }

    header {
        background-color: #2c3e50;
        color: white;
        padding: 25px;
        text-align: center;
    }

    .filters {
        width: 90%;
        margin: 20px auto;
        display: flex;
        justify-content: center;
        gap: 20px;
    }

    .filter-box {
        background-color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.2s;
    }

    .filter-box:hover {
        background-color: #ecf0f1;
    }

    .container {
        width: 90%;
        margin: 20px auto;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .book-box {
        background-color: white;
        width: 260px;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    .book-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .status {
        font-weight: bold;
        margin-bottom: 10px;
    }

    .available {
        color: green;
    }

    .not-available {
        color: red;
    }

    .due-date {
        font-size: 14px;
        margin-bottom: 10px;
        color: #555;
    }

    button {
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        background-color: #3498db;
        color: white;
        cursor: pointer;
    }

    button:disabled {
        background-color: gray;
        cursor: not-allowed;
    }

    .alert {
        width: 90%;
        margin: 20px auto;
        background-color: #ffe6e6;
        border-left: 6px solid red;
        padding: 15px;
        border-radius: 8px;
        display: none;
    }

    footer {
        margin-top: 40px;
        padding: 15px;
        text-align: center;
        background-color: #ecf0f1;
        color: #555;
    }
</style>
</head>

<body>

<header>
    <h1>ðŸ“š Portale di Gestione Biblioteca</h1>
    <p>Catalogo libri, prestiti e notifiche automatiche</p>
</header>

<!-- FILTRI -->
<div class="filters">
    <div class="filter-box" onclick="mostraCatalogo('tutti')">Tutti i libri</div>
    <div class="filter-box" onclick="mostraCatalogo('disponibili')">Solo disponibili</div>
</div>

<!-- NOTIFICHE -->
<div class="alert" id="notifiche"></div>

<!-- CATALOGO -->
<div class="container" id="catalogo"></div>

<footer>
    Prototipo software â€“ Gestione Biblioteca
</footer>

<script>
    const libri = [
        { titolo: "Il Signore degli Anelli", disponibile: true, restituzione: null },
        { titolo: "1984", disponibile: false, restituzione: "2024-01-10" },
        { titolo: "Il Piccolo Principe", disponibile: true, restituzione: null },
        { titolo: "Harry Potter", disponibile: false, restituzione: "2023-12-01" }
    ];

    function mostraCatalogo(filtro = "tutti") {
        const catalogo = document.getElementById("catalogo");
        catalogo.innerHTML = "";

        libri.forEach((libro, index) => {
            if (filtro === "disponibili" && !libro.disponibile) return;

            const box = document.createElement("div");
            box.className = "book-box";

            box.innerHTML = `
                <div class="book-title">${libro.titolo}</div>
                <div class="status ${libro.disponibile ? 'available' : 'not-available'}">
                    ${libro.disponibile ? 'Disponibile' : 'Non disponibile'}
                </div>
                ${libro.restituzione ? `<div class="due-date">Restituzione: ${libro.restituzione}</div>` : ""}
            `;

            const btn = document.createElement("button");
            btn.textContent = "Richiedi prestito";
            btn.disabled = !libro.disponibile;

            btn.onclick = () => {
                libro.disponibile = false;

                // data restituzione = oggi + 7 giorni
                const oggi = new Date();
                oggi.setDate(oggi.getDate() + 7);
                libro.restituzione = oggi.toISOString().split("T")[0];

                alert("Prestito effettuato! Restituzione entro 7 giorni.");
                mostraCatalogo(filtro);
                controllaSolleciti();
            };

            box.appendChild(btn);
            catalogo.appendChild(box);
        });
    }

    function controllaSolleciti() {
        const oggi = new Date();
        const notifiche = document.getElementById("notifiche");
        notifiche.innerHTML = "";
        let trovate = false;

        libri.forEach(libro => {
            if (!libro.disponibile && libro.restituzione) {
                const dataRest = new Date(libro.restituzione);
                if (dataRest < oggi) {
                    trovate = true;
                    notifiche.innerHTML += `
                        âš ï¸ Sollecito: il libro "<b>${libro.titolo}</b>" Ã¨ in ritardo!<br>
                    `;
                }
            }
        });

        notifiche.style.display = trovate ? "block" : "none";
    }

    mostraCatalogo();
    controllaSolleciti();
</script>

</body>
</html>
