<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Portale Biblioteca</title>

<style>
    body {
        margin: 0;
        font-family: Arial, Helvetica, sans-serif;
        background-color: #f4f6f8;
    }

    header {
        background-color: #2c3e50;
        color: white;
        padding: 25px;
        text-align: center;
    }

    .filters {
        width: 90%;
        margin: 20px auto;
        display: flex;
        justify-content: center;
        gap: 20px;
    }

    .filter-box {
        background-color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        cursor: pointer;
        font-weight: bold;
    }

    .container {
        width: 90%;
        margin: 20px auto;
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
    }

    .book-box, .user-box {
        background-color: white;
        width: 260px;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        text-align: center;
    }

    .book-title {
        font-size: 18px;
        font-weight: bold;
        margin-bottom: 8px;
    }

    .isbn {
        font-size: 13px;
        color: #555;
        margin-bottom: 8px;
    }

    .status {
        font-weight: bold;
        margin-bottom: 8px;
    }

    .available { color: green; }
    .not-available { color: red; }

    .due-date {
        font-size: 14px;
        color: #555;
        margin-bottom: 5px;
    }

    .borrower {
        font-size: 14px;
        font-style: italic;
        margin-bottom: 10px;
    }

    button {
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        background-color: #3498db;
        color: white;
        cursor: pointer;
    }

    button:disabled {
        background-color: gray;
    }

    .alert {
        width: 90%;
        margin: 20px auto;
        background-color: #ffe6e6;
        border-left: 6px solid red;
        padding: 15px;
        border-radius: 8px;
        display: none;
    }

    h2 {
        text-align: center;
        color: #2c3e50;
        margin-top: 40px;
    }

    footer {
        margin-top: 40px;
        padding: 15px;
        text-align: center;
        background-color: #ecf0f1;
        color: #555;
    }
</style>
</head>

<body>

<header>
    <h1>ðŸ“š Portale di Gestione Biblioteca</h1>
    <p>Catalogo libri, iscritti e gestione prestiti</p>
</header>

<!-- FILTRI -->
<div class="filters">
    <div class="filter-box" onclick="mostraCatalogo('tutti')">Tutti i libri</div>
    <div class="filter-box" onclick="mostraCatalogo('disponibili')">Solo disponibili</div>
</div>

<!-- NOTIFICHE -->
<div class="alert" id="notifiche"></div>

<h2>Catalogo libri</h2>
<div class="container" id="catalogo"></div>

<h2>Anagrafica iscritti al prestito</h2>
<div class="container" id="utenti"></div>

<footer>
    Prototipo software â€“ Gestione Biblioteca
</footer>

<script>
    const utenti = [
        { nome: "Mario Rossi", tessera: "U001" },
        { nome: "Laura Bianchi", tessera: "U002" },
        { nome: "Giulia Verdi", tessera: "U003" }
    ];

    const libri = [
        { titolo: "Il Signore degli Anelli", isbn: "9780261102385", disponibile: true, restituzione: null, prestatoA: null },
        { titolo: "1984", isbn: "9780451524935", disponibile: false, restituzione: "2024-01-10", prestatoA: "Mario Rossi" },
        { titolo: "Il Piccolo Principe", isbn: "9780156013987", disponibile: true, restituzione: null, prestatoA: null },
        { titolo: "Harry Potter", isbn: "9780747532743", disponibile: false, restituzione: "2023-12-01", prestatoA: "Laura Bianchi" }
    ];

    function mostraCatalogo(filtro = "tutti") {
        const catalogo = document.getElementById("catalogo");
        catalogo.innerHTML = "";

        libri.forEach(libro => {
            if (filtro === "disponibili" && !libro.disponibile) return;

            const box = document.createElement("div");
            box.className = "book-box";

            box.innerHTML = `
                <div class="book-title">${libro.titolo}</div>
                <div class="isbn">ISBN: ${libro.isbn}</div>
                <div class="status ${libro.disponibile ? 'available' : 'not-available'}">
                    ${libro.disponibile ? 'Disponibile' : 'Non disponibile'}
                </div>
                ${libro.restituzione ? `<div class="due-date">Restituzione: ${libro.restituzione}</div>` : ""}
                ${libro.prestatoA ? `<div class="borrower">Prestato a: ${libro.prestatoA}</div>` : ""}
            `;

            const btn = document.createElement("button");
            btn.textContent = "Richiedi prestito";
            btn.disabled = !libro.disponibile;

            btn.onclick = () => {
                libro.disponibile = false;
                libro.prestatoA = utenti[0].nome;

                const oggi = new Date();
                oggi.setDate(oggi.getDate() + 7);
                libro.restituzione = oggi.toISOString().split("T")[0];

                alert("Prestito effettuato a " + libro.prestatoA);
                mostraCatalogo(filtro);
                controllaSolleciti();
            };

            box.appendChild(btn);
            catalogo.appendChild(box);
        });
    }

    function mostraUtenti() {
        const contenitore = document.getElementById("utenti");
        contenitore.innerHTML = "";

        utenti.forEach(u => {
            const box = document.createElement("div");
            box.className = "user-box";
            box.innerHTML = `
                <b>${u.nome}</b><br>
                Tessera: ${u.tessera}
            `;
            contenitore.appendChild(box);
        });
    }

    function controllaSolleciti() {
        const oggi = new Date();
        const notifiche = document.getElementById("notifiche");
        notifiche.innerHTML = "";
        let trovate = false;

        libri.forEach(libro => {
            if (!libro.disponibile && libro.restituzione) {
                if (new Date(libro.restituzione) < oggi) {
                    trovate = true;
                    notifiche.innerHTML += `
                        âš ï¸ Sollecito: "<b>${libro.titolo}</b>" in ritardo (utente: ${libro.prestatoA})<br>
                    `;
                }
            }
        });

        notifiche.style.display = trovate ? "block" : "none";
    }

    mostraCatalogo();
    mostraUtenti();
    controllaSolleciti();
</script>

</body>
</html>
